# MyLocalCloud

**内网云盘**,**基于Flask开发**,**简单易上手**

> **警告!严禁用于生产环境!!!严禁用于生产环境!!!严禁用于生产环境!!!**

## 0. 部署

### 0.1 安装库

项目基于Python+Flask开发,在开始使用前,烦请先在终端执行该命令安装库

```bash
pip3 install -r requirements.txt
```

### 0.2 配置文件

配置文件是`settings.yml`.如果你把它弄丢了,没关系,新建一个`settings.yml`,然后复制下面的文本,粘贴到里面

```yaml
app:
  port : 65530 # 端口号(65535以下,默认为65530)
  file_save_path : 'file' # 文件存储位置
auth:
  user_name : 'admin' # 用户名
  user_password : 'Passw0rd' # 密码
guest:
  enable : true
  # 访客账号名为guest,密码为空,访客用户权限为只读
```

### 0.3 创建一个文件存储文件夹

这很简单,只需要运行这串指令,如果你已经建好了,那么跳过即可

```bash
mkdir {文件夹名称}
```

注意,**创建的文件夹名称应与配置文件内写的存储文件夹名称相同**

### 0.4 启动

执行此命令

```bash
python3 app.py
```

当你看见以下输出时,恭喜你,你已经部署成功了

```
INFO: WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:65530
 * Running on http://192.168.1.xxx:65530
INFO: Press CTRL+C to quit
```

以`127.0.0.1`开头的是本地地址,如果是在电脑上部署的,那么电脑访问此网址即可,手机等设备需要访问局域网地址

以`192.168.1.x`开头的地址是局域网地址,手机等设备就可以访问这个地址

外网是无法访问这个地址的,除非你**部署在公网服务器/使用内网穿透服务**

如果你把他扔到外网上了,还**没改默认账号密码**,那么恭喜,你的死对头可能会攻掉你的电脑/服务器,祝你好运 :)

当然,就算你修改了默认账号和密码,我也不推荐你去把此项目部署于公网,因为我并没有写请求限制(毕竟掌握内网的人可能就你一个),也就是说他们可以跑词典或者注入来达到进入云盘的目的,这个我就不管了,因为项目名称直译就是:`我的本地云`,这很酷

## 1. 使用

### 1.1 登录

> 点击登录按钮后,若无反应则表示登录成功,请点击下方按钮/F5刷新页面以继续

#### 1.1.1 访客登录

如果有些人想下载一些东西,但是你不想让他们上传/删除,那么**访客登录**是一个很不错的选择

首先,请确保`settings.yml`文件中,访客模式开关打开:

```yaml
guest:
  enable : true
```

然后,使用用户名 **guest** 进行登录(没有密码),在这个模式下,访客只可以下载文件,而不能上传/删除文件

#### 1.1.2 用户登录

直接使用配置文件里的账号和密码登录即可,可以上传删除下载文件

#### 1.1.3 登出

访问`http://{url}/logout`或者点击导航栏上的`退出登录`即可

### 1.2 上传

什么文件都可以上传,只需要先点击`选择文件`选择要上传的文件,然后上传即可

### 1.3 下载和删除

操作栏中有下载和删除,一旦删除文件便无法找回(不是给你放回收站里)

下载有时候会直接展示出来文件(比如照片),只需要右键另存为就可以了

## 2. FAQ

当然,我不是神,我也没法保证在每个设备上都能稳定运行(我是在MacOS上开发的,不知道Windows运行起来会怎么样),这是我给大家准备的一份潦草FAQ,供排查使用

### 2.1 文件删除失败

- 文件可能已经在磁盘里被删除了或者被重命名(这个程序并不是实时更新) --- 刷新页面
- 文件被占用(Only Windows) --- 解除文件占用即可
- 没有对此文件的读写权限(系统级) --- 检查权限并提权

### 2.2 文件上传失败

- 没有对此文件夹的读写权限(系统级) --- 检查权限并提权

如果有什么解决不了的,请提交Issues,我会尽可能帮您解决(看我精力和乐不乐意)

## 3. 贡献

这玩意写的很狗屎,我承认,开源只是为了"互联网精神"

如果你能看懂的话,还能往上写的话,我很乐意接受您的贡献,谢谢你


